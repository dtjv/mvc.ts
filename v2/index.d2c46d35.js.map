{"mappings":"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","sources":["./node_modules/cuid/lib/getRandomValue.browser.js","./node_modules/cuid/lib/fingerprint.browser.js","./node_modules/cuid/lib/pad.js","./node_modules/cuid/index.js","./node_modules/@parcel/scope-hoisting/lib/helpers.js","./src/v2/todos.ts","./src/v2/emitter.ts","./src/v2/index.ts","./src/v2/store.ts","./src/v2/view.ts","./src/v2/app.ts"],"sourcesContent":["\nvar getRandomValue;\n\nvar crypto = typeof window !== 'undefined' &&\n  (window.crypto || window.msCrypto) ||\n  typeof self !== 'undefined' &&\n  self.crypto;\n\nif (crypto) {\n    var lim = Math.pow(2, 32) - 1;\n    getRandomValue = function () {\n        return Math.abs(crypto.getRandomValues(new Uint32Array(1))[0] / lim);\n    };\n} else {\n    getRandomValue = Math.random;\n}\n\nmodule.exports = getRandomValue;\n","var pad = require('./pad.js');\n\nvar env = typeof window === 'object' ? window : self;\nvar globalCount = Object.keys(env).length;\nvar mimeTypesLength = navigator.mimeTypes ? navigator.mimeTypes.length : 0;\nvar clientId = pad((mimeTypesLength +\n  navigator.userAgent.length).toString(36) +\n  globalCount.toString(36), 4);\n\nmodule.exports = function fingerprint () {\n  return clientId;\n};\n","module.exports = function pad (num, size) {\n  var s = '000000000' + num;\n  return s.substr(s.length - size);\n};\n","/**\n * cuid.js\n * Collision-resistant UID generator for browsers and node.\n * Sequential for fast db lookups and recency sorting.\n * Safe for element IDs and server-side lookups.\n *\n * Extracted from CLCTR\n *\n * Copyright (c) Eric Elliott 2012\n * MIT License\n */\n\nvar fingerprint = require('./lib/fingerprint.js');\nvar pad = require('./lib/pad.js');\nvar getRandomValue = require('./lib/getRandomValue.js');\n\nvar c = 0,\n  blockSize = 4,\n  base = 36,\n  discreteValues = Math.pow(base, blockSize);\n\nfunction randomBlock () {\n  return pad((getRandomValue() *\n    discreteValues << 0)\n    .toString(base), blockSize);\n}\n\nfunction safeCounter () {\n  c = c < discreteValues ? c : 0;\n  c++; // this is not subliminal\n  return c - 1;\n}\n\nfunction cuid () {\n  // Starting with a lowercase letter makes\n  // it HTML element ID friendly.\n  var letter = 'c', // hard-coded allows for sequential access\n\n    // timestamp\n    // warning: this exposes the exact date and time\n    // that the uid was created.\n    timestamp = (new Date().getTime()).toString(base),\n\n    // Prevent same-machine collisions.\n    counter = pad(safeCounter().toString(base), blockSize),\n\n    // A few chars to generate distinct ids for different\n    // clients (so different computers are far less\n    // likely to generate the same id)\n    print = fingerprint(),\n\n    // Grab some more chars from Math.random()\n    random = randomBlock() + randomBlock();\n\n  return letter + timestamp + counter + print + random;\n}\n\ncuid.slug = function slug () {\n  var date = new Date().getTime().toString(36),\n    counter = safeCounter().toString(36).slice(-4),\n    print = fingerprint().slice(0, 1) +\n      fingerprint().slice(-1),\n    random = randomBlock().slice(-2);\n\n  return date.slice(-2) +\n    counter + print + random;\n};\n\ncuid.isCuid = function isCuid (stringToCheck) {\n  if (typeof stringToCheck !== 'string') return false;\n  if (stringToCheck.startsWith('c')) return true;\n  return false;\n};\n\ncuid.isSlug = function isSlug (stringToCheck) {\n  if (typeof stringToCheck !== 'string') return false;\n  var stringLength = stringToCheck.length;\n  if (stringLength >= 7 && stringLength <= 10) return true;\n  return false;\n};\n\ncuid.fingerprint = fingerprint;\n\nmodule.exports = cuid;\n","function $parcel$interopDefault(a) {\n  return a && a.__esModule ? a.default : a;\n}\n\nfunction $parcel$defineInteropFlag(a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n}\n\nfunction $parcel$export(e, n, v) {\n  Object.defineProperty(e, n, {get: v, enumerable: true});\n}\n\nfunction $parcel$exportWildcard(dest, source) {\n  Object.keys(source).forEach(function(key) {\n    if (key === 'default' || key === '__esModule') {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function get() {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n}\n\nfunction $parcel$missingModule(name) {\n  var err = new Error(\"Cannot find module '\" + name + \"'\");\n  err.code = 'MODULE_NOT_FOUND';\n  throw err;\n}\n\nvar $parcel$global =\n  typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof self !== 'undefined'\n    ? self\n    : typeof window !== 'undefined'\n    ? window\n    : typeof global !== 'undefined'\n    ? global\n    : {};\n","import cuid from 'cuid'\n\nimport { Emitter } from './emitter'\n\nexport enum TodoEvents {\n  CHANGE = 'CHANGE',\n}\n\ntype TodoProps = {\n  id: string\n  task: string\n  done: boolean\n}\n\nexport class Todo extends Emitter {\n  public readonly id: string\n  private _task: string\n  private _done: boolean\n\n  constructor(props: Pick<TodoProps, 'task'> & Partial<TodoProps>) {\n    super()\n\n    if (!props.task) {\n      throw new Error(`No task value. 'task' is required. Constructor failed.`)\n    }\n\n    this.id = props.id ?? cuid()\n    this._task = props.task\n    this._done = props.done ?? false\n  }\n\n  public get task(): string {\n    return this._task\n  }\n\n  public get done(): boolean {\n    return this._done\n  }\n\n  public toggle() {\n    this._done = !this._done\n    this.emit(TodoEvents.CHANGE)\n  }\n\n  public update(task: string) {\n    if (!task) {\n      throw new Error(`No task value. 'task' is required. Update failed.`)\n    }\n\n    if (this._task !== task) {\n      this._task = task\n      this.emit(TodoEvents.CHANGE)\n    }\n  }\n\n  public toJSON() {\n    return { id: this.id, task: this._task, done: this._done }\n  }\n}\n\nexport class Todos extends Emitter {\n  private _todos: Todo[] = []\n\n  public get todos(): Todo[] {\n    return this._todos.slice(0)\n  }\n\n  public size(): number {\n    return this._todos.length\n  }\n\n  public insert(todo: Todo): void {\n    todo.addListener(TodoEvents.CHANGE, this._onChange.bind(this))\n    this._todos.push(todo)\n    this._onChange()\n  }\n\n  public remove(todoId: string): void {\n    if (!todoId) {\n      throw new Error(`No id value. 'id' is required. Remove failed.`)\n    }\n\n    this._todos = this._todos.filter((todo) => todo.id !== todoId)\n    this._onChange()\n  }\n\n  public toJSON() {\n    return this._todos.map((todo) => todo.toJSON())\n  }\n\n  private _onChange() {\n    this.emit(TodoEvents.CHANGE)\n  }\n}\n","export type Listener = () => void\n\nexport class Emitter {\n  private readonly listeners: Map<string, Listener[]> = new Map()\n\n  addListener(event: string, listener: Listener): void {\n    const listeners = this.listeners.get(event) ?? []\n    listeners.push(listener)\n    this.listeners.set(event, listeners)\n  }\n\n  emit(event: string): void {\n    const listeners = this.listeners.get(event) ?? []\n    listeners.forEach((listener) => {\n      listener()\n    })\n  }\n}\n","import { App } from './app'\nimport { View } from './view'\nimport { Todos } from './todos'\nimport { Store } from './store'\n\nconst store = new Store('todos2', localStorage)\nconst todos = new Todos()\nconst view = new View(window.document, '#app', todos)\nconst app = new App(todos, view, store)\n\napp.show()\n","export class Store {\n  constructor(private readonly key: string, private readonly db: Storage) {}\n\n  get(): unknown[] {\n    return JSON.parse(this.db.getItem(this.key) ?? '[]')\n  }\n\n  set(data: unknown[]): void {\n    this.db.setItem(this.key, JSON.stringify(data))\n  }\n}\n","import { Todo, Todos } from './todos'\n\nexport class View {\n  private txtCache = ''\n\n  private readonly $root: HTMLElement | null\n  private readonly $wrapper: HTMLElement\n  private readonly $header: HTMLElement\n  private readonly $title: HTMLElement\n  private readonly $version: HTMLElement\n  private readonly $task: HTMLElement\n  private readonly $taskTxt: HTMLInputElement\n  private readonly $taskBtn: HTMLElement\n  private readonly $todos: HTMLElement\n  private readonly $noTodos: HTMLElement\n\n  constructor(\n    private readonly document: Document,\n    rootId: string,\n    private readonly todos: Todos\n  ) {\n    this.$root = this.document.querySelector(rootId)\n\n    if (!this.$root) {\n      throw new Error(`root id, '${rootId}', must exist in doc`)\n    }\n\n    this.$wrapper = this.createElement('div', 'wrapper')\n    this.$header = this.createElement('header')\n    this.$title = this.createElement('h1')\n    this.$title.textContent = 'Todos'\n    this.$version = this.createElement('span', 'version')\n    this.$version.textContent = 'v2'\n    this.$task = this.createElement('div', 'flex justify-between')\n    this.$taskTxt = this.createElement('input', 'task-txt') as HTMLInputElement\n    this.$taskTxt.setAttribute('type', 'text')\n    this.$taskTxt.setAttribute('placeholder', 'Enter your task')\n    this.$taskBtn = this.createElement('button', 'task-btn')\n    this.$taskBtn.textContent = 'Add Task'\n    this.$todos = this.createElement('ul', 'space-y-4')\n    this.$noTodos = this.createElement('p', 'hidden font-bold text-gray-500')\n    this.$noTodos.textContent = 'No tasks for you!'\n\n    this.$header.append(this.$title, this.$version)\n    this.$task.append(this.$taskTxt, this.$taskBtn)\n    this.$wrapper.append(this.$header, this.$task, this.$todos, this.$noTodos)\n    this.$root.append(this.$wrapper)\n\n    this.$taskBtn.addEventListener('click', this.createTodo.bind(this))\n    this.$todos.addEventListener('change', this.toggleTodo.bind(this))\n    this.$todos.addEventListener('click', this.removeTodo.bind(this))\n    this.$todos.addEventListener('focusin', this.cacheTodoTxt.bind(this))\n    this.$todos.addEventListener('focusout', this.updateTodo.bind(this))\n  }\n\n  public render(): void {\n    while (this.$todos.firstChild) {\n      this.$todos.firstChild.remove()\n    }\n\n    if (this.todos.size() === 0) {\n      this.$noTodos.classList.remove('hidden')\n    } else {\n      this.$noTodos.classList.add('hidden')\n      this.$todos.append(\n        ...this.todos.todos.map((todo) => this.createItem(todo))\n      )\n    }\n  }\n\n  private searchTodo(id: string): Todo | undefined {\n    return id ? this.todos.todos.find((todo) => todo.id === id) : undefined\n  }\n\n  private createTodo(): void {\n    const todo = new Todo({ task: this.$taskTxt.value })\n\n    this.todos.insert(todo)\n    this.$taskTxt.value = ''\n  }\n\n  private toggleTodo(event: Event): void {\n    const target = event.target as HTMLInputElement\n\n    if (target.classList.contains('todo-chk')) {\n      const todo = this.searchTodo(target.parentElement?.id ?? '')\n      todo?.toggle()\n    }\n  }\n\n  private cacheTodoTxt(event: Event): void {\n    const target = event.target as HTMLElement\n\n    if (target?.classList.contains('todo-txt')) {\n      this.txtCache = target.textContent!\n    }\n  }\n\n  private updateTodo(event: Event): void {\n    const target = event.target as HTMLElement\n\n    if (target.classList.contains('todo-txt')) {\n      const todo = this.searchTodo(target.parentElement?.id ?? '')\n\n      todo?.update(target.textContent ? target.textContent : this.txtCache)\n      this.txtCache = ''\n    }\n  }\n\n  private removeTodo(event: Event): void {\n    const target = event.target as HTMLElement\n\n    if (target.classList.contains('todo-btn')) {\n      const todo = this.searchTodo(target.parentElement?.id ?? '')\n\n      if (todo) {\n        this.todos.remove(todo.id)\n      }\n    }\n  }\n\n  private createElement(tag: string, classList?: string) {\n    const $element = this.document.createElement(tag)\n\n    if (classList) {\n      $element.classList.add(...classList.split(' '))\n    }\n\n    return $element\n  }\n\n  private createItem(todo: Todo): HTMLElement {\n    const $li = this.createElement('li', 'todo')\n    $li.setAttribute('id', todo.id)\n\n    const $todoChk = this.createElement('input', 'todo-chk') as HTMLInputElement\n    $todoChk.setAttribute('type', 'checkbox')\n    if (todo.done) {\n      $todoChk.setAttribute('checked', '')\n    }\n\n    const $todoTxt = this.createElement('span', 'todo-txt')\n    $todoTxt.setAttribute('contentEditable', '')\n\n    const textNode = this.document.createTextNode(todo.task)\n    if (todo.done) {\n      const $s = this.createElement('s')\n      $s.append(textNode)\n      $todoTxt.append($s)\n    } else {\n      $todoTxt.append(textNode)\n    }\n\n    const $todoBtn = this.createElement('button', 'todo-btn')\n    $todoBtn.textContent = 'Delete'\n\n    $li.append($todoChk, $todoTxt, $todoBtn)\n\n    return $li\n  }\n}\n","import { Todo, Todos, TodoEvents } from './todos'\nimport { View } from './view'\nimport { Store } from './store'\n\nexport class App {\n  constructor(\n    private readonly _todos: Todos,\n    private readonly _view: View,\n    private readonly _store: Store\n  ) {\n    this.load()\n    this._todos.addListener(TodoEvents.CHANGE, this._onChange.bind(this))\n  }\n\n  public load() {\n    this._store.get().forEach((todo) => {\n      this._todos.insert(new Todo(todo as Todo))\n    })\n  }\n\n  public show() {\n    this._view.render()\n  }\n\n  private _save() {\n    this._store.set(this._todos.toJSON())\n  }\n\n  private _onChange() {\n    this._save()\n    this.show()\n  }\n}\n"],"names":["$899c8d4b3b9142004b11c6bca9bc63a4$var$getRandomValue","$874a98b3ff0cc14b0ea13ef2563de436$var$pad","num","size","s","substr","length","$874a98b3ff0cc14b0ea13ef2563de436$var$env","window","self","$874a98b3ff0cc14b0ea13ef2563de436$var$globalCount","Object","keys","$874a98b3ff0cc14b0ea13ef2563de436$var$clientId","navigator","mimeTypes","userAgent","toString","$21d98642b051b25f69586700969a706a$var$fingerprint","$21d98642b051b25f69586700969a706a$var$pad","$899c8d4b3b9142004b11c6bca9bc63a4$var$crypto","crypto","msCrypto","$899c8d4b3b9142004b11c6bca9bc63a4$var$lim","Math","pow","abs","getRandomValues","Uint32Array","random","$21d98642b051b25f69586700969a706a$var$getRandomValue","$21d98642b051b25f69586700969a706a$var$c","$21d98642b051b25f69586700969a706a$var$discreteValues","$21d98642b051b25f69586700969a706a$var$randomBlock","$21d98642b051b25f69586700969a706a$var$safeCounter","$21d98642b051b25f69586700969a706a$var$cuid","timestamp","Date","getTime","slug","date","counter","slice","print","isCuid","stringToCheck","startsWith","isSlug","stringLength","fingerprint","a","$a92039be7681da1df1783298770ed5c8$export$TodoEvents","__esModule","default","$0f82f3d49fbca5d6f3f192d7cb8f396c$export$Emitter","constructor","this","listeners","Map","addListener","event","listener","get","push","set","emit","forEach","$a92039be7681da1df1783298770ed5c8$export$Todo","props","super","task","Error","id","_task","_done","done","toggle","CHANGE","update","toJSON","$e9c206a21fe4d48344f291d1032aace2$var$store","key","db","JSON","parse","getItem","data","setItem","stringify","localStorage","$e9c206a21fe4d48344f291d1032aace2$var$todos","arguments","_todos","insert","todo","_onChange","bind","remove","todoId","filter","map","$e9c206a21fe4d48344f291d1032aace2$var$view","document","rootId","todos","txtCache","$root","querySelector","$wrapper","createElement","$header","$title","textContent","$version","$task","$taskTxt","setAttribute","$taskBtn","$todos","$noTodos","append","addEventListener","createTodo","toggleTodo","removeTodo","cacheTodoTxt","updateTodo","render","firstChild","classList","add","createItem","searchTodo","find","undefined","value","target","contains","parentElement","tag","$element","split","$li","$todoChk","$todoTxt","textNode","createTextNode","$s","$todoBtn","$e9c206a21fe4d48344f291d1032aace2$var$app","_view","_store","load","show","_save"],"version":3,"file":"index.d2c46d35.js.map"}