{"mappings":"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","sources":["./src/v1/view.ts","./node_modules/cuid/lib/getRandomValue.browser.js","./node_modules/cuid/lib/fingerprint.browser.js","./node_modules/cuid/lib/pad.js","./node_modules/cuid/index.js","./node_modules/@parcel/scope-hoisting/lib/helpers.js","./src/v1/index.ts","./src/v1/todos.ts","./src/v1/store.ts","./src/v1/app.ts"],"sourcesContent":["import { Todo } from './todos'\n\nexport enum ViewEvents {\n  CREATE_TODO = 'CREATE_TODO',\n  UPDATE_TODO = 'UPDATE_TODO',\n  REMOVE_TODO = 'REMOVE_TODO',\n}\n\nexport type Handler = (props: Partial<Todo>, event?: Event) => void\n\nexport class View {\n  private readonly handlers: Map<string, Handler> = new Map()\n  private txtCache = ''\n\n  private readonly $root: HTMLElement | null\n  private readonly $wrapper: HTMLElement\n  private readonly $header: HTMLElement\n  private readonly $title: HTMLElement\n  private readonly $version: HTMLElement\n  private readonly $task: HTMLElement\n  private readonly $taskTxt: HTMLInputElement\n  private readonly $taskBtn: HTMLElement\n  private readonly $todos: HTMLElement\n  private readonly $noTodos: HTMLElement\n\n  constructor(private readonly document: Document, rootId: string) {\n    this.$root = this.document.querySelector(rootId)\n\n    if (!this.$root) {\n      throw new Error(`root id, '${rootId}', must exist in doc`)\n    }\n\n    this.$wrapper = this._createElement('div', 'wrapper')\n    this.$header = this._createElement('header')\n    this.$title = this._createElement('h1')\n    this.$title.textContent = 'Todos'\n    this.$version = this._createElement('span', 'version')\n    this.$version.textContent = 'v1'\n    this.$task = this._createElement('div', 'flex justify-between')\n    this.$taskTxt = this._createElement('input', 'task-txt') as HTMLInputElement\n    this.$taskTxt.setAttribute('type', 'text')\n    this.$taskTxt.setAttribute('placeholder', 'Enter your task')\n    this.$taskBtn = this._createElement('button', 'task-btn')\n    this.$taskBtn.textContent = 'Add Task'\n    this.$todos = this._createElement('ul', 'space-y-4')\n    this.$noTodos = this._createElement('p', 'hidden font-bold text-gray-500')\n    this.$noTodos.textContent = 'No tasks for you!'\n\n    this.$header.append(this.$title, this.$version)\n    this.$task.append(this.$taskTxt, this.$taskBtn)\n    this.$wrapper.append(this.$header, this.$task, this.$todos, this.$noTodos)\n    this.$root.append(this.$wrapper)\n\n    this.$taskBtn.addEventListener('click', this._createTodo.bind(this))\n    this.$todos.addEventListener('change', this._toggleTodo.bind(this))\n    this.$todos.addEventListener('click', this._removeTodo.bind(this))\n    this.$todos.addEventListener('focusin', this._cacheTodoTxt.bind(this))\n    this.$todos.addEventListener('focusout', this._updateTodo.bind(this))\n  }\n\n  public registerHandler({\n    event,\n    handler,\n  }: {\n    event: ViewEvents\n    handler: Handler\n  }): void {\n    this.handlers.set(event, handler)\n  }\n\n  public render(todos: Todo[]): void {\n    while (this.$todos.firstChild) {\n      this.$todos.firstChild.remove()\n    }\n\n    if (todos.length === 0) {\n      this.$noTodos.classList.remove('hidden')\n    } else {\n      this.$noTodos.classList.add('hidden')\n      this.$todos.append(...todos.map((todo) => this._createItem(todo)))\n    }\n  }\n\n  private _createTodo(): void {\n    this.handlers.get(ViewEvents.CREATE_TODO)?.({ task: this.$taskTxt.value })\n    this.$taskTxt.value = ''\n  }\n\n  private _toggleTodo(event: Event): void {\n    const target = event.target as HTMLInputElement\n\n    if (target.classList.contains('todo-chk')) {\n      this.handlers.get(ViewEvents.UPDATE_TODO)?.({\n        id: target.parentElement?.id,\n        done: target.checked,\n      })\n    }\n  }\n\n  private _cacheTodoTxt(event: Event): void {\n    const target = event.target as HTMLElement\n\n    if (target?.classList.contains('todo-txt')) {\n      this.txtCache = target.textContent!\n    }\n  }\n\n  private _updateTodo(event: Event): void {\n    const target = event.target as HTMLElement\n\n    if (target.classList.contains('todo-txt')) {\n      this.handlers.get(ViewEvents.UPDATE_TODO)?.({\n        id: target.parentElement?.id,\n        task: target.textContent ? target.textContent : this.txtCache,\n      })\n      this.txtCache = ''\n    }\n  }\n\n  private _removeTodo(event: Event): void {\n    const target = event.target as HTMLElement\n\n    if (target.classList.contains('todo-btn')) {\n      this.handlers.get(ViewEvents.REMOVE_TODO)?.({\n        id: target.parentElement?.id,\n      })\n    }\n  }\n\n  private _createElement(tag: string, classList?: string) {\n    const $element = this.document.createElement(tag)\n\n    if (classList) {\n      $element.classList.add(...classList.split(' '))\n    }\n\n    return $element\n  }\n\n  private _createItem(todo: Todo): HTMLElement {\n    const $li = this._createElement('li', 'todo')\n    $li.setAttribute('id', todo.id)\n\n    const $todoChk = this._createElement(\n      'input',\n      'todo-chk'\n    ) as HTMLInputElement\n    $todoChk.setAttribute('type', 'checkbox')\n    if (todo.done) {\n      $todoChk.setAttribute('checked', '')\n    }\n\n    const $todoTxt = this._createElement('span', 'todo-txt')\n    $todoTxt.setAttribute('contentEditable', '')\n\n    const textNode = this.document.createTextNode(todo.task)\n    if (todo.done) {\n      const $s = this._createElement('s')\n      $s.append(textNode)\n      $todoTxt.append($s)\n    } else {\n      $todoTxt.append(textNode)\n    }\n\n    const $todoBtn = this._createElement('button', 'todo-btn')\n    $todoBtn.textContent = 'Delete'\n\n    $li.append($todoChk, $todoTxt, $todoBtn)\n\n    return $li\n  }\n}\n","\nvar getRandomValue;\n\nvar crypto = typeof window !== 'undefined' &&\n  (window.crypto || window.msCrypto) ||\n  typeof self !== 'undefined' &&\n  self.crypto;\n\nif (crypto) {\n    var lim = Math.pow(2, 32) - 1;\n    getRandomValue = function () {\n        return Math.abs(crypto.getRandomValues(new Uint32Array(1))[0] / lim);\n    };\n} else {\n    getRandomValue = Math.random;\n}\n\nmodule.exports = getRandomValue;\n","var pad = require('./pad.js');\n\nvar env = typeof window === 'object' ? window : self;\nvar globalCount = Object.keys(env).length;\nvar mimeTypesLength = navigator.mimeTypes ? navigator.mimeTypes.length : 0;\nvar clientId = pad((mimeTypesLength +\n  navigator.userAgent.length).toString(36) +\n  globalCount.toString(36), 4);\n\nmodule.exports = function fingerprint () {\n  return clientId;\n};\n","module.exports = function pad (num, size) {\n  var s = '000000000' + num;\n  return s.substr(s.length - size);\n};\n","/**\n * cuid.js\n * Collision-resistant UID generator for browsers and node.\n * Sequential for fast db lookups and recency sorting.\n * Safe for element IDs and server-side lookups.\n *\n * Extracted from CLCTR\n *\n * Copyright (c) Eric Elliott 2012\n * MIT License\n */\n\nvar fingerprint = require('./lib/fingerprint.js');\nvar pad = require('./lib/pad.js');\nvar getRandomValue = require('./lib/getRandomValue.js');\n\nvar c = 0,\n  blockSize = 4,\n  base = 36,\n  discreteValues = Math.pow(base, blockSize);\n\nfunction randomBlock () {\n  return pad((getRandomValue() *\n    discreteValues << 0)\n    .toString(base), blockSize);\n}\n\nfunction safeCounter () {\n  c = c < discreteValues ? c : 0;\n  c++; // this is not subliminal\n  return c - 1;\n}\n\nfunction cuid () {\n  // Starting with a lowercase letter makes\n  // it HTML element ID friendly.\n  var letter = 'c', // hard-coded allows for sequential access\n\n    // timestamp\n    // warning: this exposes the exact date and time\n    // that the uid was created.\n    timestamp = (new Date().getTime()).toString(base),\n\n    // Prevent same-machine collisions.\n    counter = pad(safeCounter().toString(base), blockSize),\n\n    // A few chars to generate distinct ids for different\n    // clients (so different computers are far less\n    // likely to generate the same id)\n    print = fingerprint(),\n\n    // Grab some more chars from Math.random()\n    random = randomBlock() + randomBlock();\n\n  return letter + timestamp + counter + print + random;\n}\n\ncuid.slug = function slug () {\n  var date = new Date().getTime().toString(36),\n    counter = safeCounter().toString(36).slice(-4),\n    print = fingerprint().slice(0, 1) +\n      fingerprint().slice(-1),\n    random = randomBlock().slice(-2);\n\n  return date.slice(-2) +\n    counter + print + random;\n};\n\ncuid.isCuid = function isCuid (stringToCheck) {\n  if (typeof stringToCheck !== 'string') return false;\n  if (stringToCheck.startsWith('c')) return true;\n  return false;\n};\n\ncuid.isSlug = function isSlug (stringToCheck) {\n  if (typeof stringToCheck !== 'string') return false;\n  var stringLength = stringToCheck.length;\n  if (stringLength >= 7 && stringLength <= 10) return true;\n  return false;\n};\n\ncuid.fingerprint = fingerprint;\n\nmodule.exports = cuid;\n","function $parcel$interopDefault(a) {\n  return a && a.__esModule ? a.default : a;\n}\n\nfunction $parcel$defineInteropFlag(a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n}\n\nfunction $parcel$export(e, n, v) {\n  Object.defineProperty(e, n, {get: v, enumerable: true});\n}\n\nfunction $parcel$exportWildcard(dest, source) {\n  Object.keys(source).forEach(function(key) {\n    if (key === 'default' || key === '__esModule') {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function get() {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n}\n\nfunction $parcel$missingModule(name) {\n  var err = new Error(\"Cannot find module '\" + name + \"'\");\n  err.code = 'MODULE_NOT_FOUND';\n  throw err;\n}\n\nvar $parcel$global =\n  typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof self !== 'undefined'\n    ? self\n    : typeof window !== 'undefined'\n    ? window\n    : typeof global !== 'undefined'\n    ? global\n    : {};\n","import { App } from './app'\nimport { View } from './view'\nimport { Todos } from './todos'\nimport { Store } from './store'\n\nconst view = new View(window.document, '#app')\nconst todos = new Todos()\nconst store = new Store('todos1', localStorage)\nconst app = new App(todos, view, store)\n\napp.show()\n","import cuid from 'cuid'\n\nexport type Todo = {\n  id: string\n  task: string\n  done: boolean\n}\n\nexport class Todos {\n  private _todos: Todo[] = []\n\n  public insert(props: Pick<Todo, 'task'> & Partial<Todo>): void {\n    if (!props.task) {\n      throw new Error(`No task. Todo 'task' is required. Insert failed.`)\n    }\n\n    const todo: Todo = {\n      id: props.id ?? cuid(),\n      task: props.task,\n      done: props.done ?? false,\n    }\n\n    this._todos.push(todo)\n  }\n\n  public update(props: Pick<Todo, 'id'> & Partial<Todo>): void {\n    if (!props.id) {\n      throw new Error(`No id. Todo 'id' is required. Update failed.`)\n    }\n\n    this._todos = this._todos.map((todo) =>\n      todo.id === props.id\n        ? {\n            id: todo.id,\n            task: props.task ?? todo.task,\n            done: props.done ?? todo.done,\n          }\n        : todo\n    )\n  }\n\n  public remove(todoId: string): void {\n    if (!todoId) {\n      throw new Error(`No id. Todo 'id' is required. Remove failed.`)\n    }\n\n    this._todos = this._todos.filter((todo) => todo.id !== todoId)\n  }\n\n  public toJSON() {\n    return this._todos\n  }\n}\n","export class Store {\n  constructor(private readonly key: string, private readonly db: Storage) {}\n\n  public get(): unknown[] {\n    return JSON.parse(this.db.getItem(this.key) ?? '[]')\n  }\n\n  public set(data: unknown[]): void {\n    this.db.setItem(this.key, JSON.stringify(data))\n  }\n}\n","import { Todo, Todos } from './todos'\nimport { View, ViewEvents } from './view'\nimport { Store } from './store'\n\nexport class App {\n  constructor(\n    private readonly _todos: Todos,\n    private readonly _view: View,\n    private readonly _store: Store\n  ) {\n    this._load()\n\n    this._view.registerHandler({\n      event: ViewEvents.CREATE_TODO,\n      handler: this._handleCreateTodo.bind(this),\n    })\n\n    this._view.registerHandler({\n      event: ViewEvents.UPDATE_TODO,\n      handler: this._handleUpdateTodo.bind(this),\n    })\n\n    this._view.registerHandler({\n      event: ViewEvents.REMOVE_TODO,\n      handler: this._handleRemoveTodo.bind(this),\n    })\n  }\n\n  public show() {\n    this._view.render(this._todos.toJSON())\n  }\n\n  private _load() {\n    this._store.get().forEach((todo) => {\n      this._todos.insert(todo as Todo)\n    })\n  }\n\n  private _save() {\n    this._store.set(this._todos.toJSON())\n  }\n\n  private _handleCreateTodo(props: Partial<Todo>): void {\n    if (props.task) {\n      this._todos.insert({ task: props.task })\n      this._save()\n      this.show()\n    }\n  }\n\n  private _handleUpdateTodo(props: Partial<Todo>): void {\n    if (props.id) {\n      this._todos.update({ ...props, id: props.id })\n      this._save()\n      this.show()\n    }\n  }\n\n  private _handleRemoveTodo(props: Partial<Todo>): void {\n    if (props.id) {\n      this._todos.remove(props.id)\n      this._save()\n      this.show()\n    }\n  }\n}\n"],"names":["$4e9568b1d6bbf4be1ac2296fd381bdeb$export$ViewEvents","ViewEvents","$899c8d4b3b9142004b11c6bca9bc63a4$var$getRandomValue","$874a98b3ff0cc14b0ea13ef2563de436$var$pad","num","size","s","substr","length","$874a98b3ff0cc14b0ea13ef2563de436$var$env","window","self","$874a98b3ff0cc14b0ea13ef2563de436$var$globalCount","Object","keys","$874a98b3ff0cc14b0ea13ef2563de436$var$clientId","navigator","mimeTypes","userAgent","toString","$21d98642b051b25f69586700969a706a$var$fingerprint","$21d98642b051b25f69586700969a706a$var$pad","$899c8d4b3b9142004b11c6bca9bc63a4$var$crypto","crypto","msCrypto","$899c8d4b3b9142004b11c6bca9bc63a4$var$lim","Math","pow","abs","getRandomValues","Uint32Array","random","$21d98642b051b25f69586700969a706a$var$getRandomValue","$21d98642b051b25f69586700969a706a$var$c","$21d98642b051b25f69586700969a706a$var$discreteValues","$21d98642b051b25f69586700969a706a$var$randomBlock","$21d98642b051b25f69586700969a706a$var$safeCounter","$21d98642b051b25f69586700969a706a$var$cuid","timestamp","Date","getTime","slug","date","counter","slice","print","isCuid","stringToCheck","startsWith","isSlug","stringLength","fingerprint","a","__esModule","default","$5c27223303929c7b4e725a8b3db72c8f$var$view","constructor","document","rootId","this","handlers","Map","txtCache","$root","querySelector","Error","$wrapper","_createElement","$header","$title","textContent","$version","$task","$taskTxt","setAttribute","$taskBtn","$todos","$noTodos","append","addEventListener","_createTodo","bind","_toggleTodo","_removeTodo","_cacheTodoTxt","_updateTodo","registerHandler","event","handler","set","render","todos","firstChild","remove","classList","add","map","todo","_createItem","get","CREATE_TODO","task","value","target","contains","UPDATE_TODO","id","parentElement","done","checked","REMOVE_TODO","tag","$element","createElement","split","$li","$todoChk","$todoTxt","textNode","createTextNode","$s","$todoBtn","$5c27223303929c7b4e725a8b3db72c8f$var$todos","_todos","insert","props","push","update","todoId","filter","toJSON","$5c27223303929c7b4e725a8b3db72c8f$var$store","key","db","JSON","parse","getItem","data","setItem","stringify","localStorage","$5c27223303929c7b4e725a8b3db72c8f$var$app","_view","_store","_load","_handleCreateTodo","_handleUpdateTodo","_handleRemoveTodo","show","forEach","_save"],"version":3,"file":"index.dc454b7d.js.map"}