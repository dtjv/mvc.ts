{"mappings":"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","sources":["./src/v1/view.ts","./node_modules/cuid/lib/getRandomValue.browser.js","./node_modules/cuid/lib/fingerprint.browser.js","./node_modules/cuid/lib/pad.js","./node_modules/cuid/index.js","./node_modules/@parcel/scope-hoisting/lib/helpers.js","./src/v1/index.ts","./src/v1/todos.ts","./src/v1/store.ts","./src/v1/app.ts"],"sourcesContent":["import { Todo } from './todos'\n\nexport enum ViewEvents {\n  CREATE_TODO = 'CREATE_TODO',\n  UPDATE_TODO = 'UPDATE_TODO',\n  REMOVE_TODO = 'REMOVE_TODO',\n}\n\nexport type Handler = (props: Partial<Todo>, event?: Event) => void\n\nexport class View {\n  private readonly handlers: Map<string, Handler> = new Map()\n  private txtCache = ''\n\n  private readonly $root: HTMLElement | null\n  private readonly $wrapper: HTMLElement\n  private readonly $header: HTMLElement\n  private readonly $title: HTMLElement\n  private readonly $version: HTMLElement\n  private readonly $task: HTMLElement\n  private readonly $taskTxt: HTMLInputElement\n  private readonly $taskBtn: HTMLElement\n  private readonly $todos: HTMLElement\n  private readonly $noTodos: HTMLElement\n\n  constructor(private readonly document: Document, rootId: string) {\n    this.$root = this.document.querySelector(rootId)\n\n    if (!this.$root) {\n      throw new Error(`root id, '${rootId}', must exist in doc`)\n    }\n\n    this.$wrapper = this.createElement('div', 'wrapper')\n    this.$header = this.createElement('header')\n    this.$title = this.createElement('h1')\n    this.$title.textContent = 'Todos'\n    this.$version = this.createElement('span', 'version')\n    this.$version.textContent = 'v1'\n    this.$task = this.createElement('div', 'flex justify-between')\n    this.$taskTxt = this.createElement('input', 'task-txt') as HTMLInputElement\n    this.$taskTxt.setAttribute('type', 'text')\n    this.$taskTxt.setAttribute('placeholder', 'Enter your task')\n    this.$taskBtn = this.createElement('button', 'task-btn')\n    this.$taskBtn.textContent = 'Add Task'\n    this.$todos = this.createElement('ul', 'space-y-4')\n    this.$noTodos = this.createElement('p', 'hidden font-bold text-gray-500')\n    this.$noTodos.textContent = 'No tasks for you!'\n\n    this.$header.append(this.$title, this.$version)\n    this.$task.append(this.$taskTxt, this.$taskBtn)\n    this.$wrapper.append(this.$header, this.$task, this.$todos, this.$noTodos)\n    this.$root.append(this.$wrapper)\n\n    this.$taskBtn.addEventListener('click', this.createTodo.bind(this))\n    this.$todos.addEventListener('change', this.toggleTodo.bind(this))\n    this.$todos.addEventListener('click', this.removeTodo.bind(this))\n    this.$todos.addEventListener('focusin', this.cacheTodoTxt.bind(this))\n    this.$todos.addEventListener('focusout', this.updateTodo.bind(this))\n  }\n\n  public registerHandler({\n    event,\n    handler,\n  }: {\n    event: ViewEvents\n    handler: Handler\n  }): void {\n    this.handlers.set(event, handler)\n  }\n\n  public render(todos: Todo[]): void {\n    while (this.$todos.firstChild) {\n      this.$todos.firstChild.remove()\n    }\n\n    if (todos.length === 0) {\n      this.$noTodos.classList.remove('hidden')\n    } else {\n      this.$noTodos.classList.add('hidden')\n      this.$todos.append(...todos.map((todo) => this.createItem(todo)))\n    }\n  }\n\n  private createTodo(): void {\n    this.handlers.get(ViewEvents.CREATE_TODO)?.({ task: this.$taskTxt.value })\n    this.$taskTxt.value = ''\n  }\n\n  private toggleTodo(event: Event): void {\n    const target = event.target as HTMLInputElement\n\n    if (target.classList.contains('todo-chk')) {\n      this.handlers.get(ViewEvents.UPDATE_TODO)?.({\n        id: target.parentElement?.id,\n        done: target.checked,\n      })\n    }\n  }\n\n  private cacheTodoTxt(event: Event): void {\n    const target = event.target as HTMLElement\n\n    if (target?.classList.contains('todo-txt')) {\n      this.txtCache = target.textContent!\n    }\n  }\n\n  private updateTodo(event: Event): void {\n    const target = event.target as HTMLElement\n\n    if (target.classList.contains('todo-txt')) {\n      this.handlers.get(ViewEvents.UPDATE_TODO)?.({\n        id: target.parentElement?.id,\n        task: target.textContent ? target.textContent : this.txtCache,\n      })\n      this.txtCache = ''\n    }\n  }\n\n  private removeTodo(event: Event): void {\n    const target = event.target as HTMLElement\n\n    if (target.classList.contains('todo-btn')) {\n      this.handlers.get(ViewEvents.REMOVE_TODO)?.({\n        id: target.parentElement?.id,\n      })\n    }\n  }\n\n  private createElement(tag: string, classList?: string) {\n    const $element = this.document.createElement(tag)\n\n    if (classList) {\n      $element.classList.add(...classList.split(' '))\n    }\n\n    return $element\n  }\n\n  private createItem(todo: Todo): HTMLElement {\n    const $li = this.createElement('li', 'todo')\n    $li.setAttribute('id', todo.id)\n\n    const $todoChk = this.createElement('input', 'todo-chk') as HTMLInputElement\n    $todoChk.setAttribute('type', 'checkbox')\n    if (todo.done) {\n      $todoChk.setAttribute('checked', '')\n    }\n\n    const $todoTxt = this.createElement('span', 'todo-txt')\n    $todoTxt.setAttribute('contentEditable', '')\n\n    const textNode = this.document.createTextNode(todo.task)\n    if (todo.done) {\n      const $s = this.createElement('s')\n      $s.append(textNode)\n      $todoTxt.append($s)\n    } else {\n      $todoTxt.append(textNode)\n    }\n\n    const $todoBtn = this.createElement('button', 'todo-btn')\n    $todoBtn.textContent = 'Delete'\n\n    $li.append($todoChk, $todoTxt, $todoBtn)\n\n    return $li\n  }\n}\n","\nvar getRandomValue;\n\nvar crypto = typeof window !== 'undefined' &&\n  (window.crypto || window.msCrypto) ||\n  typeof self !== 'undefined' &&\n  self.crypto;\n\nif (crypto) {\n    var lim = Math.pow(2, 32) - 1;\n    getRandomValue = function () {\n        return Math.abs(crypto.getRandomValues(new Uint32Array(1))[0] / lim);\n    };\n} else {\n    getRandomValue = Math.random;\n}\n\nmodule.exports = getRandomValue;\n","var pad = require('./pad.js');\n\nvar env = typeof window === 'object' ? window : self;\nvar globalCount = Object.keys(env).length;\nvar mimeTypesLength = navigator.mimeTypes ? navigator.mimeTypes.length : 0;\nvar clientId = pad((mimeTypesLength +\n  navigator.userAgent.length).toString(36) +\n  globalCount.toString(36), 4);\n\nmodule.exports = function fingerprint () {\n  return clientId;\n};\n","module.exports = function pad (num, size) {\n  var s = '000000000' + num;\n  return s.substr(s.length - size);\n};\n","/**\n * cuid.js\n * Collision-resistant UID generator for browsers and node.\n * Sequential for fast db lookups and recency sorting.\n * Safe for element IDs and server-side lookups.\n *\n * Extracted from CLCTR\n *\n * Copyright (c) Eric Elliott 2012\n * MIT License\n */\n\nvar fingerprint = require('./lib/fingerprint.js');\nvar pad = require('./lib/pad.js');\nvar getRandomValue = require('./lib/getRandomValue.js');\n\nvar c = 0,\n  blockSize = 4,\n  base = 36,\n  discreteValues = Math.pow(base, blockSize);\n\nfunction randomBlock () {\n  return pad((getRandomValue() *\n    discreteValues << 0)\n    .toString(base), blockSize);\n}\n\nfunction safeCounter () {\n  c = c < discreteValues ? c : 0;\n  c++; // this is not subliminal\n  return c - 1;\n}\n\nfunction cuid () {\n  // Starting with a lowercase letter makes\n  // it HTML element ID friendly.\n  var letter = 'c', // hard-coded allows for sequential access\n\n    // timestamp\n    // warning: this exposes the exact date and time\n    // that the uid was created.\n    timestamp = (new Date().getTime()).toString(base),\n\n    // Prevent same-machine collisions.\n    counter = pad(safeCounter().toString(base), blockSize),\n\n    // A few chars to generate distinct ids for different\n    // clients (so different computers are far less\n    // likely to generate the same id)\n    print = fingerprint(),\n\n    // Grab some more chars from Math.random()\n    random = randomBlock() + randomBlock();\n\n  return letter + timestamp + counter + print + random;\n}\n\ncuid.slug = function slug () {\n  var date = new Date().getTime().toString(36),\n    counter = safeCounter().toString(36).slice(-4),\n    print = fingerprint().slice(0, 1) +\n      fingerprint().slice(-1),\n    random = randomBlock().slice(-2);\n\n  return date.slice(-2) +\n    counter + print + random;\n};\n\ncuid.isCuid = function isCuid (stringToCheck) {\n  if (typeof stringToCheck !== 'string') return false;\n  if (stringToCheck.startsWith('c')) return true;\n  return false;\n};\n\ncuid.isSlug = function isSlug (stringToCheck) {\n  if (typeof stringToCheck !== 'string') return false;\n  var stringLength = stringToCheck.length;\n  if (stringLength >= 7 && stringLength <= 10) return true;\n  return false;\n};\n\ncuid.fingerprint = fingerprint;\n\nmodule.exports = cuid;\n","function $parcel$interopDefault(a) {\n  return a && a.__esModule ? a.default : a;\n}\n\nfunction $parcel$defineInteropFlag(a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n}\n\nfunction $parcel$export(e, n, v) {\n  Object.defineProperty(e, n, {get: v, enumerable: true});\n}\n\nfunction $parcel$exportWildcard(dest, source) {\n  Object.keys(source).forEach(function(key) {\n    if (key === 'default' || key === '__esModule') {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function get() {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n}\n\nfunction $parcel$missingModule(name) {\n  var err = new Error(\"Cannot find module '\" + name + \"'\");\n  err.code = 'MODULE_NOT_FOUND';\n  throw err;\n}\n\nvar $parcel$global =\n  typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof self !== 'undefined'\n    ? self\n    : typeof window !== 'undefined'\n    ? window\n    : typeof global !== 'undefined'\n    ? global\n    : {};\n","import { App } from './app'\nimport { View } from './view'\nimport { Todos } from './todos'\nimport { Store } from './store'\n\nconst view = new View(window.document, '#app')\nconst todos = new Todos()\nconst store = new Store('todos1', localStorage)\nconst app = new App(todos, view, store)\n\napp.show()\n","import cuid from 'cuid'\n\nexport type Todo = {\n  id: string\n  task: string\n  done: boolean\n}\n\nexport class Todos {\n  private todos: Todo[] = []\n\n  insert(props: Pick<Todo, 'task'> & Partial<Todo>): void {\n    if (!props.task) {\n      throw new Error(`No task. Todo 'task' is required. Insert failed.`)\n    }\n\n    const todo: Todo = {\n      id: props.id ?? cuid(),\n      task: props.task,\n      done: props.done ?? false,\n    }\n\n    this.todos.push(todo)\n  }\n\n  update(props: Pick<Todo, 'id'> & Partial<Todo>): void {\n    if (!props.id) {\n      throw new Error(`No id. Todo 'id' is required. Update failed.`)\n    }\n\n    this.todos = this.todos.map((todo) =>\n      todo.id === props.id\n        ? {\n            id: todo.id,\n            task: props.task ?? todo.task,\n            done: props.done ?? todo.done,\n          }\n        : todo\n    )\n  }\n\n  remove(todoId: string): void {\n    if (!todoId) {\n      throw new Error(`No id. Todo 'id' is required. Remove failed.`)\n    }\n\n    this.todos = this.todos.filter((todo) => todo.id !== todoId)\n  }\n\n  toJSON() {\n    return this.todos\n  }\n}\n","export class Store {\n  constructor(private readonly key: string, private readonly db: Storage) {}\n\n  get(): unknown[] {\n    return JSON.parse(this.db.getItem(this.key) ?? '[]')\n  }\n\n  set(data: unknown[]): void {\n    this.db.setItem(this.key, JSON.stringify(data))\n  }\n}\n","import { Todo, Todos } from './todos'\nimport { View, ViewEvents } from './view'\nimport { Store } from './store'\n\nexport class App {\n  constructor(\n    private readonly todos: Todos,\n    private readonly view: View,\n    private readonly store: Store\n  ) {\n    this.load()\n\n    this.view.registerHandler({\n      event: ViewEvents.CREATE_TODO,\n      handler: this.handleCreateTodo.bind(this),\n    })\n\n    this.view.registerHandler({\n      event: ViewEvents.UPDATE_TODO,\n      handler: this.handleUpdateTodo.bind(this),\n    })\n\n    this.view.registerHandler({\n      event: ViewEvents.REMOVE_TODO,\n      handler: this.handleRemoveTodo.bind(this),\n    })\n  }\n\n  load() {\n    this.store.get().forEach((todo) => {\n      this.todos.insert(todo as Todo)\n    })\n  }\n\n  save() {\n    this.store.set(this.todos.toJSON())\n  }\n\n  show() {\n    this.view.render(this.todos.toJSON())\n  }\n\n  handleCreateTodo(props: Partial<Todo>): void {\n    if (props.task) {\n      this.todos.insert({ task: props.task })\n      this.save()\n      this.show()\n    }\n  }\n\n  handleUpdateTodo(props: Partial<Todo>): void {\n    if (props.id) {\n      this.todos.update({ ...props, id: props.id })\n      this.save()\n      this.show()\n    }\n  }\n\n  handleRemoveTodo(props: Partial<Todo>): void {\n    if (props.id) {\n      this.todos.remove(props.id)\n      this.save()\n      this.show()\n    }\n  }\n}\n"],"names":["$4e9568b1d6bbf4be1ac2296fd381bdeb$export$ViewEvents","ViewEvents","$899c8d4b3b9142004b11c6bca9bc63a4$var$getRandomValue","$874a98b3ff0cc14b0ea13ef2563de436$var$pad","num","size","s","substr","length","$874a98b3ff0cc14b0ea13ef2563de436$var$env","window","self","$874a98b3ff0cc14b0ea13ef2563de436$var$globalCount","Object","keys","$874a98b3ff0cc14b0ea13ef2563de436$var$clientId","navigator","mimeTypes","userAgent","toString","$21d98642b051b25f69586700969a706a$var$fingerprint","$21d98642b051b25f69586700969a706a$var$pad","$899c8d4b3b9142004b11c6bca9bc63a4$var$crypto","crypto","msCrypto","$899c8d4b3b9142004b11c6bca9bc63a4$var$lim","Math","pow","abs","getRandomValues","Uint32Array","random","$21d98642b051b25f69586700969a706a$var$getRandomValue","$21d98642b051b25f69586700969a706a$var$c","$21d98642b051b25f69586700969a706a$var$discreteValues","$21d98642b051b25f69586700969a706a$var$randomBlock","$21d98642b051b25f69586700969a706a$var$safeCounter","$21d98642b051b25f69586700969a706a$var$cuid","timestamp","Date","getTime","slug","date","counter","slice","print","isCuid","stringToCheck","startsWith","isSlug","stringLength","fingerprint","a","__esModule","default","$5c27223303929c7b4e725a8b3db72c8f$var$view","constructor","document","rootId","this","handlers","Map","txtCache","$root","querySelector","Error","$wrapper","createElement","$header","$title","textContent","$version","$task","$taskTxt","setAttribute","$taskBtn","$todos","$noTodos","append","addEventListener","createTodo","bind","toggleTodo","removeTodo","cacheTodoTxt","updateTodo","registerHandler","event","handler","set","render","todos","firstChild","remove","classList","add","map","todo","createItem","get","CREATE_TODO","task","value","target","contains","UPDATE_TODO","id","parentElement","done","checked","REMOVE_TODO","tag","$element","split","$li","$todoChk","$todoTxt","textNode","createTextNode","$s","$todoBtn","$5c27223303929c7b4e725a8b3db72c8f$var$todos","insert","props","push","update","todoId","filter","toJSON","$5c27223303929c7b4e725a8b3db72c8f$var$store","key","db","JSON","parse","getItem","data","setItem","stringify","localStorage","$5c27223303929c7b4e725a8b3db72c8f$var$app","view","store","load","handleCreateTodo","handleUpdateTodo","handleRemoveTodo","forEach","save","show"],"version":3,"file":"index.5f87e013.js.map"}